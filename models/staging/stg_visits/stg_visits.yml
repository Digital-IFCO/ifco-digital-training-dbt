version: 2

models:
  - name: stg_visits
    description:
      The `stg_visits` model is part of the staging layer, designed to
      prepare and clean visit data prior to further transformation and analysis in
      downstream models.
    configs:
      tags: s06-metrics
    columns:
      - name: assetId
        data_type: STRING
        description: The unique identifier for the asset associated with the visit.
        tests:
          - not_null
      - name: locationId
        data_type: STRING
        description: The unique identifier for the location where the visit occurred.
        tests:
          - not_null
          - relationships:
              to: ref('stg_locations')
              field: locationId
      - name: visitId
        data_type: STRING
        description: The unique identifier for the visit event.
        tests:
          - unique
          - not_null
      - name: startTime
        data_type: TIMESTAMP
        description: The timestamp indicating when the visit started.
        tests:
          - not_null
      - name: endTime
        data_type: TIMESTAMP
        description: The timestamp indicating when the visit ended.
        tests:
          - not_null
      - name: timeZone
        data_type: STRING
        description: The time zone in which the visit took place.
        tests:
          - not_null
      - name: dwellTimeDays
        data_type: DOUBLE
        description: The total duration of the visit expressed in days.
        tests:
          - not_null
