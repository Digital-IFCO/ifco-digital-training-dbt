version: 2

models:
  - name: visit_preparation_migrated
    description: >
      This model contains visits that have had the invalid unknown visits filtered,
      being this the visits containing sequences of known visits migrated to sql
    columns:
      - name: assetId
        description: Unique identifier for the asset
        tests:
          - not_null
      - name: locationId
        description: Identifier for the location associated with the visit
        tests:
          - not_null
      - name: visitId
        description: Unique identifier for each visit
        tests:
          - not_null
          - unique
      - name: latitude
        description: Geographical latitude of the visit location
        tests:
          - not_null
      - name: longitude
        description: Geographical longitude of the visit location
        tests:
          - not_null
      - name: startTime
        description: Timestamp when the visit started
        tests:
          - not_null
      - name: endTime
        description: Timestamp when the visit ended
        tests:
          - not_null
      - name: timeZone
        description: Time zone of the visit location
        tests:
          - not_null
      - name: incomplete
        description: Indicates if the visit data is incomplete
        tests:
          - not_null
      - name: sourceFolder
        description: Folder path where the source file is located
        tests:
          - not_null
      - name: fileDate
        description: Date when the source file was created
        tests:
          - not_null
      - name: dwellTimeDays
        description: Duration of the visit in days
        tests:
          - not_null
      - name: validFrom
        description: Timestamp from which the visit data is valid
        tests:
          - not_null
    tests:
      - dwell_time_days_max:
          max_value: 10
          severity: 'warn'